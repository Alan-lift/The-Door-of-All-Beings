# 种族选择和角色创建系统设计

## 1. 设计目标

### 1.1 核心目标
- **多样性**：提供丰富的种族选择，满足不同玩家偏好
- **平衡性**：确保各种族在游戏中保持平衡
- **深度**：每个种族具有独特的背景、能力和成长路径
- **自定义性**：支持玩家个性化定制角色
- **沉浸感**：通过种族背景增强游戏的沉浸感

### 1.2 设计原则
- **直观性**：种族选择界面直观易懂
- **信息透明**：清晰展示各种族的特点和能力
- **灵活性**：支持多种创建方式（快速创建、自定义创建）
- **扩展性**：设计可扩展的架构，支持未来添加新种族
- **包容性**：考虑不同类型玩家的需求

## 2. 种族体系设计

### 2.1 种族分类

#### 2.1.1 人类
- **背景**：现实世界的普通人类，通过灵能连接进入游戏世界
- **特点**：适应性强，学习能力突出，平衡型种族
- **初始属性**：
  - 灵力值：80
  - 生命值：100
  - 体力值：100
  - 记忆值：70
  - 梦想值：70
- **特殊能力**：
  - 快速学习：技能学习速度+20%
  - 灵能感应：对灵能的感知能力增强
  - 适应性：在各种环境中的属性惩罚减少50%

#### 2.1.2 妖精
- **背景**：游戏世界的原生种族，天生具有灵能操控能力
- **特点**：灵能强大，擅长魔法和操控自然
- **初始属性**：
  - 灵力值：120
  - 生命值：80
  - 体力值：70
  - 记忆值：90
  - 梦想值：90
- **特殊能力**：
  - 灵能操控：灵能技能效果+30%
  - 自然亲和：与自然环境的交互效果增强
  - 变身能力：可以暂时变身成其他生物

#### 2.1.3 灵兽
- **背景**：具有灵智的动物，通过灵能进化而来
- **特点**：身体能力突出，感官敏锐
- **初始属性**：
  - 灵力值：60
  - 生命值：130
  - 体力值：120
  - 记忆值：50
  - 梦想值：50
- **特殊能力**：
  - 敏锐感官：感知范围增加50%
  - 身体强化：物理攻击和防御+25%
  - 野性直觉：在危险来临时获得预警

#### 2.1.4 灵体
- **背景**：由纯粹的灵能凝聚而成的存在
- **特点**：虚无缥缈，擅长精神和灵魂相关能力
- **初始属性**：
  - 灵力值：150
  - 生命值：50
  - 体力值：50
  - 记忆值：120
  - 梦想值：120
- **特殊能力**：
  - 灵体形态：可以穿过障碍物
  - 精神操控：精神类技能效果+35%
  - 灵能恢复：灵能恢复速度+50%

#### 2.1.5 混血种
- **背景**：不同种族的混血后代
- **特点**：兼具多种种族的特点，能力多样化
- **初始属性**：
  - 灵力值：100
  - 生命值：100
  - 体力值：100
  - 记忆值：80
  - 梦想值：80
- **特殊能力**：
  - 混血优势：可以选择两个种族的特长
  - 灵活适应：根据环境自动调整属性
  - 多元文化：与各种族的交互效果增强

### 2.2 种族解锁机制
- **初始种族**：人类、妖精、灵兽（默认解锁）
- **灵体**：需要完成特定任务或达到一定等级解锁
- **混血种**：需要解锁至少两个基础种族后解锁
- **隐藏种族**：通过特殊事件或成就解锁

## 3. 角色创建流程设计

### 3.1 流程总览
```
+-----------------+     +-----------------+     +-----------------+
|  种族选择        |     |  角色定制        |     |  背景选择        |
|  - 种族展示      | --> |  - 外观定制      | --> |  - 背景故事      |
|  - 能力对比      |     |  - 属性分配      |     |  - 初始技能      |
|  - 种族背景      |     |  - 特长选择      |     |  - 初始物品      |
+-----------------+     +-----------------+     +-----------------+
          |                       |                       |
          v                       v                       v
+-----------------+     +-----------------+     +-----------------+
|  命名环节        |     |  预览确认        |     |  进入游戏        |
|  - 角色命名      | --> |  - 角色信息预览  | --> |  - 新手引导      |
|  - 验证规则      |     |  - 调整选项      |     |  - 初始场景      |
|  - 随机命名      |     |  - 确认创建      |     |                 |
+-----------------+     +-----------------+     +-----------------+
```

### 3.2 详细流程设计

#### 3.2.1 种族选择
- **种族展示**：以卡片形式展示各种族的形象、名称和简要描述
- **能力对比**：提供可视化的属性对比图表
- **种族背景**：点击种族卡片查看详细背景故事
- **预览功能**：选择种族后可预览角色外观
- **推荐功能**：根据玩家的游戏偏好推荐适合的种族

#### 3.2.2 角色定制

##### 3.2.2.1 外观定制
- **基础外观**：每个种族有多种基础外观模板
- **详细定制**：
  - 体型调整（身高、体重、比例）
  - 面部特征（眼睛、鼻子、嘴巴、耳朵等）
  - 毛发/皮肤/鳞片颜色和纹理
  - 装饰（服装、饰品、纹身等）
- **随机生成**：支持随机生成外观，可多次刷新
- **保存预设**：支持保存和加载外观预设

##### 3.2.2.2 属性分配
- **初始属性池**：每个种族有固定的初始属性总和
- **自由分配**：玩家可将额外的属性点分配到任意属性
- **属性上限**：每个属性有初始上限，可通过升级提升
- **推荐分配**：根据所选种族和职业提供属性分配建议

##### 3.2.2.3 特长选择
- **种族特长**：每个种族有固定的特长选择范围
- **特长效果**：特长提供独特的能力或属性加成
- **特长组合**：支持选择多个特长，形成不同的玩法风格
- **特长预览**：清晰展示特长的效果和影响

#### 3.2.3 背景选择

##### 3.2.3.1 背景故事
- **预设背景**：每个种族有多种预设背景故事
- **自定义背景**：支持玩家自定义背景故事
- **背景影响**：背景故事影响初始技能和物品
- **沉浸感增强**：通过背景故事增强角色的代入感

##### 3.2.3.2 初始技能
- **种族技能**：每个种族有固定的初始技能
- **选择技能**：玩家可从技能池中选择额外的初始技能
- **技能效果**：清晰展示技能的效果和使用方式
- **技能组合**：支持不同技能组合，形成独特的玩法

##### 3.2.3.3 初始物品
- **基础物品**：每个种族有固定的初始物品
- **选择物品**：玩家可从物品池中选择额外的初始物品
- **物品用途**：清晰展示物品的用途和效果
- **物品组合**：支持不同物品组合，适应不同玩法

#### 3.2.4 命名环节
- **角色命名**：玩家为角色输入名称
- **命名规则**：
  - 长度限制（2-20个字符）
  - 字符限制（支持中文、英文、数字）
  - 禁止敏感词汇
  - 唯一性验证
- **随机命名**：提供随机命名功能，支持多种风格
- **名称预览**：实时预览角色名称效果

#### 3.2.5 预览确认
- **角色信息预览**：全面展示角色的各项信息
  - 种族、外观、属性、特长
  - 背景故事、初始技能、初始物品
- **调整选项**：允许玩家返回之前的步骤进行调整
- **确认创建**：玩家确认后创建角色
- **创建动画**：角色创建过程中的过渡动画

#### 3.2.6 进入游戏
- **新手引导**：根据角色种族和背景提供个性化引导
- **初始场景**：根据种族和背景分配不同的初始场景
- **欢迎信息**：显示个性化的欢迎信息
- **初始任务**：提供明确的初始任务指引

## 4. 快速创建功能

### 4.1 设计目标
- **便捷性**：快速创建角色，减少等待时间
- **多样性**：即使快速创建也能生成多样化的角色
- **平衡性**：快速创建的角色保持游戏平衡

### 4.2 实现方式
- **一键创建**：点击按钮自动生成完整角色
- **随机化算法**：基于种族特点随机生成属性、特长、外观等
- **预设模板**：提供多种预设模板（战斗型、探索型、社交型等）
- **快速调整**：允许玩家在生成后进行简单调整

## 5. 角色数据结构

### 5.1 核心数据
```json
{
  "characterId": "uuid",
  "playerId": "uuid",
  "name": "角色名称",
  "race": "人类",
  "subRace": "普通人类",
  "appearance": {
    "bodyType": "type1",
    "faceFeatures": {
      "eyes": "type3",
      "nose": "type2",
      "mouth": "type1"
    },
    "colorScheme": {
      "skin": "#f0d9b5",
      "hair": "#332211",
      "eyes": "#664422"
    },
    "decorations": [
      { "type": "clothes", "id": "clothes_001" },
      { "type": "accessory", "id": "acc_003" }
    ]
  },
  "attributes": {
    "灵力值": 80,
    "生命值": 100,
    "体力值": 100,
    "记忆值": 70,
    "梦想值": 70
  },
  "abilities": [
    { "id": "quick_learning", "level": 1 },
    { "id": "spirit_sensing", "level": 1 },
    { "id": "adaptability", "level": 1 }
  ],
  "skills": [
    { "id": "spirit_bolt", "level": 1 },
    { "id": "healing_touch", "level": 1 }
  ],
  "inventory": [
    { "id": "spirit_crystal", "quantity": 3 },
    { "id": "healing_potion", "quantity": 2 }
  ],
  "background": {
    "story": "普通人类，对灵能世界充满好奇",
    "origin": "现实世界",
    "motivation": "探索灵能的奥秘"
  },
  "level": 1,
  "experience": 0,
  "creationTime": "2025-12-08T12:00:00Z"
}
```

## 6. 界面设计

### 6.1 主界面布局
```
+-----------------------------------------------+
|  顶部标题：角色创建                             |
+-----------------------------------------------+
|                                               |
|  左侧种族选择区：                               |
|  - 种族卡片列表                                |
|  - 种族对比图表                                |
|                                               |
|  右侧角色预览区：                               |
|  - 3D角色模型预览                              |
|  - 角色信息展示                                |
|  - 旋转/缩放控制                                |
+-----------------------------------------------+
|  中部定制区：                                   |
|  - 选项卡切换（外观、属性、特长、背景）         |
|  - 详细定制控件                                |
+-----------------------------------------------+
|  底部操作区：                                   |
|  - 快速创建按钮                                |
|  - 上一步/下一步按钮                            |
|  - 确认创建按钮                                |
|  - 取消按钮                                    |
+-----------------------------------------------+
```

### 6.2 关键界面组件

#### 6.2.1 种族卡片
- **视觉设计**：高质量的种族形象展示
- **信息层次**：
  - 种族名称（突出显示）
  - 简要描述（1-2行）
  - 核心属性图标
  - 特殊能力标签
- **交互效果**：
  - 悬停放大效果
  - 选中状态高亮
  - 点击展开详细信息

#### 6.2.2 属性分配器
- **可视化滑块**：直观调整各属性值
- **属性总和显示**：实时显示已分配和剩余属性点
- **推荐分配按钮**：一键应用推荐分配
- **重置功能**：快速重置属性分配

#### 6.2.3 特长选择器
- **特长列表**：以卡片形式展示可选特长
- **特长分类**：按功能分类（战斗、探索、社交等）
- **特长描述**：清晰展示特长效果
- **选择限制**：显示当前可选择的特长数量

#### 6.2.4 外观定制器
- **3D实时预览**：实时显示外观变化
- **分类定制**：按身体部位分类定制
- **预设样式**：提供多种预设外观样式
- **随机生成**：一键生成随机外观

## 7. 技术实现支持

### 7.1 前端技术
- **3D渲染**：Three.js用于角色模型预览
- **响应式设计**：适配不同设备和屏幕尺寸
- **拖拽功能**：支持拖拽式属性分配
- **实时预览**：外观变化实时更新

### 7.2 后端技术
- **数据存储**：MongoDB存储角色数据
- **唯一性验证**：确保角色名称唯一
- **数据校验**：验证角色数据的合法性
- **API设计**：RESTful API用于角色创建和管理

### 7.3 AI支持
- **智能推荐**：根据玩家历史数据推荐适合的种族和属性分配
- **自动生成**：AI生成个性化的背景故事
- **平衡算法**：AI确保角色属性和能力的平衡性

## 8. 扩展性设计

### 8.1 新种族添加机制
- **模块化设计**：种族数据和逻辑模块化，便于添加新种族
- **配置驱动**：通过配置文件定义种族属性和能力
- **热更新支持**：支持不重启服务器添加新种族
- **向后兼容**：确保新种族添加不影响现有角色

### 8.2 自定义种族支持（未来扩展）
- **种族编辑器**：允许玩家创建自定义种族
- **审核机制**：自定义种族需经过审核才能使用
- **平衡性检查**：自动检查自定义种族的平衡性
- **分享功能**：允许玩家分享自定义种族

## 9. 测试和优化

### 9.1 测试重点
- **种族平衡性**：确保各种族在游戏中保持平衡
- **界面易用性**：测试角色创建流程的易用性
- **性能测试**：测试3D模型预览的性能
- **数据完整性**：确保角色数据完整保存

### 9.2 优化方向
- **加载速度优化**：优化3D模型和资源加载
- **界面流畅度**：确保界面交互流畅
- **错误处理**：完善错误处理和提示
- **用户反馈**：收集用户反馈，持续优化

## 10. 总结

通过以上设计，种族选择和角色创建系统将提供丰富的种族选择、深度的自定义选项和流畅的创建体验。系统设计考虑了不同类型玩家的需求，支持快速创建和详细自定义，同时保持了游戏的平衡性和扩展性。

该系统将增强游戏的沉浸感和可玩性，让玩家能够创建符合自己喜好的角色，为后续的游戏体验奠定良好基础。